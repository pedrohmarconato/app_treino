<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Simples</title>
    <script src="./config.js"></script>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div id="app">
        <!-- Conteúdo aqui -->
    </div>

    <script type="module">
        // Template de login mínimo
        const loginTemplate = () => `
            <div id="login-screen" class="screen">
                <div class="login-container">
                    <h1>Cyclo</h1>
                    <p>Bem-vindo ao seu treino</p>
                    <button onclick="showHome()">Ir para Home</button>
                </div>
            </div>
        `;

        // Template de home mínimo
        const homeTemplate = () => `
            <div id="home-screen" class="screen">
                <div class="home-header">
                    <h1>Home</h1>
                    <button onclick="showLogin()">Voltar</button>
                </div>
                <div style="padding: 20px; background: var(--bg-card); margin: 20px; border-radius: 8px;">
                    <h3>Treino do Dia</h3>
                    <p>Teste de conteúdo</p>
                </div>
            </div>
        `;

        function renderTemplate(templateName) {
            console.log('[TEST] Renderizando:', templateName);
            const app = document.getElementById('app');
            
            // Limpar classes active
            document.querySelectorAll('.screen.active').forEach(s => {
                s.classList.remove('active');
                console.log('[TEST] Removida classe active de:', s.id);
            });
            
            let html;
            if (templateName === 'login') {
                html = loginTemplate();
            } else if (templateName === 'home') {
                html = homeTemplate();
            }
            
            console.log('[TEST] HTML gerado:', html ? html.length : 'NENHUM');
            app.innerHTML = html;
            
            // Forçar reflow
            app.offsetHeight;
            
            // Adicionar classe active
            const screen = document.getElementById(templateName + '-screen');
            if (screen) {
                screen.classList.add('active');
                console.log('[TEST] Classe active adicionada a:', screen.id);
                console.log('[TEST] Classes finais:', screen.className);
                console.log('[TEST] Estilo display:', getComputedStyle(screen).display);
            } else {
                console.error('[TEST] Screen não encontrado:', templateName + '-screen');
                console.log('[TEST] Elementos no DOM:', app.innerHTML.substring(0, 200));
            }
        }

        // Funções globais
        window.showLogin = () => renderTemplate('login');
        window.showHome = () => renderTemplate('home');

        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            console.log('[TEST] DOM carregado, inicializando...');
            renderTemplate('login');
        });
    </script>
</body>
</html>